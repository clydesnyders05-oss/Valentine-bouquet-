<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Valentine's Bouquet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffb6c1 0%, #ffc0cb 50%, #ffb6c1 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 30px, rgba(255, 255, 255, 0.05) 30px, rgba(255, 255, 255, 0.05) 31px),
                repeating-linear-gradient(90deg, transparent, transparent 30px, rgba(255, 255, 255, 0.05) 30px, rgba(255, 255, 255, 0.05) 31px);
            pointer-events: none;
        }

        .container {
            background: rgba(255, 182, 193, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 1;
        }

        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: white;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            color: white;
            text-align: center;
            font-size: 1em;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .divider {
            height: 2px;
            background: white;
            margin: 20px 0;
        }

        .bouquet-display {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .vase-container {
            position: relative;
            width: 150px;
            height: 180px;
        }

        .vase {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 100px;
        }

        .flowers-container {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 120px;
        }

        .flower {
            position: absolute;
            width: 50px;
            height: 80px;
            transition: all 0.3s ease;
        }

        .flower:nth-child(1) { left: 10%; bottom: 0; }
        .flower:nth-child(2) { left: 30%; bottom: 10px; }
        .flower:nth-child(3) { right: 30%; bottom: 10px; }
        .flower:nth-child(4) { right: 10%; bottom: 0; }

        .selection-area {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .arrow-btn {
            background: #ff6b9d;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 15px;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }

        .arrow-btn:hover {
            background: #ff5a8c;
            transform: scale(1.1);
        }

        .arrow-btn:active {
            transform: scale(0.95);
        }

        .item-display {
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .item-display svg,
        .item-display img {
            max-width: 100%;
            max-height: 100%;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
        }

        .counter {
            color: white;
            font-size: 2em;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
        }

        .button {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            border: 3px solid white;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 25px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
            font-weight: bold;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
        }

        .button:active {
            transform: translateY(0);
        }

        .input-group {
            margin: 20px 0;
        }

        .input-group label {
            color: white;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
            text-align: center;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 20px;
            font-size: 1em;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .input-group textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .preview-message {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .preview-message h3 {
            color: #ff6b9d;
            margin-bottom: 10px;
        }

        .preview-message p {
            color: #666;
            line-height: 1.6;
        }

        .hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            color: rgba(255, 255, 255, 0.3);
            font-size: 20px;
            animation: float 4s infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 30px 20px;
            }

            h1 {
                font-size: 2em;
            }

            .item-display {
                width: 150px;
                height: 150px;
            }

            .arrow-btn {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }

        #finalBouquet {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
        }

        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .button-group .button {
            margin: 0;
            flex: 1;
            min-width: 150px;
        }
    </style>
</head>
<body>
    <div class="hearts" id="hearts"></div>
    
    <div class="container">
        <!-- Welcome Screen -->
        <div class="screen active" id="welcomeScreen">
            <div class="bouquet-display">
                <div class="vase-container">
                    <div class="flowers-container">
                        <svg class="flower" style="left: 15%; bottom: 5px;" viewBox="0 0 50 80">
                            <line x1="25" y1="80" x2="25" y2="30" stroke="#88c057" stroke-width="2"/>
                            <ellipse cx="25" cy="25" rx="12" ry="18" fill="#ffccd5"/>
                            <ellipse cx="25" cy="25" rx="8" ry="12" fill="#fff"/>
                        </svg>
                        <svg class="flower" style="left: 35%; bottom: 15px;" viewBox="0 0 50 80">
                            <line x1="25" y1="80" x2="25" y2="30" stroke="#88c057" stroke-width="2"/>
                            <ellipse cx="25" cy="25" rx="12" ry="18" fill="#f4a6c0"/>
                            <ellipse cx="25" cy="25" rx="8" ry="12" fill="#fff"/>
                        </svg>
                        <svg class="flower" style="right: 35%; bottom: 15px;" viewBox="0 0 50 80">
                            <line x1="25" y1="80" x2="25" y2="30" stroke="#88c057" stroke-width="2"/>
                            <ellipse cx="25" cy="25" rx="12" ry="18" fill="#ffd4e5"/>
                            <ellipse cx="25" cy="25" rx="8" ry="12" fill="#fff"/>
                        </svg>
                        <svg class="flower" style="right: 15%; bottom: 5px;" viewBox="0 0 50 80">
                            <line x1="25" y1="80" x2="25" y2="30" stroke="#88c057" stroke-width="2"/>
                            <ellipse cx="25" cy="25" rx="12" ry="18" fill="#ffc0d3"/>
                            <ellipse cx="25" cy="25" rx="8" ry="12" fill="#fff"/>
                        </svg>
                    </div>
                    <svg class="vase" viewBox="0 0 120 100">
                        <path d="M30 10 Q20 10 20 30 L25 90 Q25 95 30 95 L90 95 Q95 95 95 90 L100 30 Q100 10 90 10 Z" 
                              fill="none" stroke="#b8d4f1" stroke-width="3"/>
                        <path d="M30 15 L90 15 L92 85 L28 85 Z" fill="#e8f4f8"/>
                        <line x1="40" y1="10" x2="40" y2="15" stroke="#f4e4c1" stroke-width="2"/>
                        <line x1="60" y1="10" x2="60" y2="15" stroke="#f4e4c1" stroke-width="2"/>
                        <line x1="80" y1="10" x2="80" y2="15" stroke="#f4e4c1" stroke-width="2"/>
                    </svg>
                </div>
            </div>
            <h1>My Valentine's Bouquet</h1>
            <div class="divider"></div>
            <p class="subtitle">Compose your unique bouquet, choose a cute vase<br>and send it to your loved one ‚ù§Ô∏è</p>
            <button class="button" onclick="nextScreen('vaseScreen')">Create my first bouquet !</button>
        </div>

        <!-- Vase Selection Screen -->
        <div class="screen" id="vaseScreen">
            <h1 style="font-size: 2em;">Choose your vase</h1>
            <div class="selection-area">
                <button class="arrow-btn" onclick="previousItem('vase')">‚óÑ</button>
                <div class="item-display" id="vaseDisplay"></div>
                <button class="arrow-btn" onclick="nextItem('vase')">‚ñ∫</button>
            </div>
            <button class="button" onclick="selectVase()">I want this !</button>
        </div>

        <!-- Flower Selection Screen -->
        <div class="screen" id="flowerScreen">
            <h1 style="font-size: 2em;">Choose your flowers</h1>
            <div class="counter" id="flowerCounter">0/4</div>
            <div class="selection-area">
                <button class="arrow-btn" onclick="previousItem('flower')">‚óÑ</button>
                <div class="item-display" id="flowerDisplay"></div>
                <button class="arrow-btn" onclick="nextItem('flower')">‚ñ∫</button>
            </div>
            <button class="button" onclick="addFlower()">I want this !</button>
            <button class="button" onclick="nextScreen('messageScreen')" id="continueBtn" style="display: none;">Continue !</button>
        </div>

        <!-- Message Screen -->
        <div class="screen" id="messageScreen">
            <h1 style="font-size: 2em;">Write your message</h1>
            <div class="input-group">
                <label>His / Her / Their name :</label>
                <input type="text" id="recipientName" placeholder="Enter name...">
            </div>
            <div class="input-group">
                <label>Your message :</label>
                <textarea id="messageText" placeholder="Write your heartfelt message..."></textarea>
            </div>
            <button class="button" onclick="createBouquet()">Finish !</button>
        </div>

        <!-- Preview Screen -->
        <div class="screen" id="previewScreen">
            <h1 style="font-size: 2em;">Your Bouquet</h1>
            <div id="finalBouquet"></div>
            <div class="preview-message">
                <h3 id="displayName"></h3>
                <p id="displayMessage"></p>
            </div>
            <div class="button-group">
                <button class="button" onclick="downloadBouquet()">Download üì•</button>
                <button class="button" onclick="resetApp()">Create New</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // State management
        const state = {
            currentVaseIndex: 0,
            currentFlowerIndex: 0,
            selectedVase: null,
            selectedFlowers: [],
            recipientName: '',
            message: ''
        };

        // Vase designs
        const vases = [
            `<svg viewBox="0 0 120 100" width="120" height="100">
                <path d="M30 10 Q20 10 20 30 L25 90 Q25 95 30 95 L90 95 Q95 95 95 90 L100 30 Q100 10 90 10 Z" 
                      fill="none" stroke="#b8d4f1" stroke-width="3"/>
                <path d="M30 15 L90 15 L92 85 L28 85 Z" fill="#e8f4f8"/>
                <line x1="40" y1="10" x2="40" y2="15" stroke="#f4e4c1" stroke-width="2"/>
                <line x1="60" y1="10" x2="60" y2="15" stroke="#f4e4c1" stroke-width="2"/>
                <line x1="80" y1="10" x2="80" y2="15" stroke="#f4e4c1" stroke-width="2"/>
            </svg>`,
            `<svg viewBox="0 0 120 100" width="120" height="100">
                <ellipse cx="60" cy="50" rx="35" ry="40" fill="#ffd4e5" stroke="#ff9fc4" stroke-width="3"/>
                <ellipse cx="60" cy="50" rx="30" ry="35" fill="#ffe8f0"/>
                <circle cx="50" cy="45" r="3" fill="#ff9fc4"/>
                <circle cx="70" cy="45" r="3" fill="#ff9fc4"/>
                <circle cx="60" cy="55" r="3" fill="#ff9fc4"/>
            </svg>`,
            `<svg viewBox="0 0 120 100" width="120" height="100">
                <rect x="30" y="20" width="60" height="70" rx="5" fill="#e8d4f8" stroke="#c4a4d8" stroke-width="3"/>
                <rect x="35" y="25" width="50" height="60" fill="#f4e8ff"/>
                <line x1="40" y1="30" x2="80" y2="30" stroke="#c4a4d8" stroke-width="2"/>
                <line x1="40" y1="80" x2="80" y2="80" stroke="#c4a4d8" stroke-width="2"/>
            </svg>`,
            `<svg viewBox="0 0 120 100" width="120" height="100">
                <path d="M40 90 L30 30 Q30 15 45 15 L75 15 Q90 15 90 30 L80 90 Z" 
                      fill="#ffeaa7" stroke="#fdcb6e" stroke-width="3"/>
                <path d="M42 85 L35 35 L85 35 L78 85 Z" fill="#fff5d4"/>
                <circle cx="50" cy="25" r="4" fill="#fdcb6e"/>
                <circle cx="70" cy="25" r="4" fill="#fdcb6e"/>
            </svg>`,
            `<svg viewBox="0 0 120 100" width="120" height="100">
                <circle cx="60" cy="60" r="35" fill="#d4f8e8" stroke="#a4d8c4" stroke-width="3"/>
                <circle cx="60" cy="60" r="30" fill="#e8fff4"/>
                <path d="M45 50 Q60 40 75 50" stroke="#a4d8c4" stroke-width="2" fill="none"/>
                <path d="M45 65 Q60 75 75 65" stroke="#a4d8c4" stroke-width="2" fill="none"/>
            </svg>`
        ];

        // Flower designs
        const flowers = [
            { name: 'Tulip', svg: `<svg viewBox="0 0 50 80" width="50" height="80">
                <line x1="25" y1="80" x2="25" y2="30" stroke="#88c057" stroke-width="2"/>
                <ellipse cx="25" cy="25" rx="12" ry="18" fill="#ff6b9d"/>
                <ellipse cx="25" cy="25" rx="8" ry="12" fill="#ffc0d3"/>
            </svg>` },
            { name: 'Rose', svg: `<svg viewBox="0 0 50 80" width="50" height="80">
                <line x1="25" y1="80" x2="25" y2="35" stroke="#88c057" stroke-width="2"/>
                <circle cx="25" cy="20" r="15" fill="#d63031"/>
                <circle cx="25" cy="20" r="10" fill="#ff6b6b"/>
                <circle cx="25" cy="20" r="5" fill="#d63031"/>
                <ellipse cx="20" cy="40" rx="3" ry="5" fill="#88c057"/>
            </svg>` },
            { name: 'Daisy', svg: `<svg viewBox="0 0 50 80" width="50" height="80">
                <line x1="25" y1="80" x2="25" y2="30" stroke="#88c057" stroke-width="2"/>
                <circle cx="25" cy="20" r="5" fill="#ffd93d"/>
                <ellipse cx="25" cy="10" rx="4" ry="7" fill="#fff"/>
                <ellipse cx="25" cy="30" rx="4" ry="7" fill="#fff"/>
                <ellipse cx="15" cy="20" rx="7" ry="4" fill="#fff"/>
                <ellipse cx="35" cy="20" rx="7" ry="4" fill="#fff"/>
            </svg>` },
            { name: 'Sunflower', svg: `<svg viewBox="0 0 50 80" width="50" height="80">
                <line x1="25" y1="80" x2="25" y2="30" stroke="#88c057" stroke-width="2"/>
                <circle cx="25" cy="20" r="6" fill="#8b4513"/>
                <ellipse cx="25" cy="10" rx="5" ry="8" fill="#ffd93d"/>
                <ellipse cx="25" cy="30" rx="5" ry="8" fill="#ffd93d"/>
                <ellipse cx="15" cy="20" rx="8" ry="5" fill="#ffd93d"/>
                <ellipse cx="35" cy="20" rx="8" ry="5" fill="#ffd93d"/>
                <ellipse cx="18" cy="13" rx="5" ry="5" fill="#ffd93d"/>
                <ellipse cx="32" cy="13" rx="5" ry="5" fill="#ffd93d"/>
                <ellipse cx="18" cy="27" rx="5" ry="5" fill="#ffd93d"/>
                <ellipse cx="32" cy="27" rx="5" ry="5" fill="#ffd93d"/>
            </svg>` },
            { name: 'Lily', svg: `<svg viewBox="0 0 50 80" width="50" height="80">
                <line x1="25" y1="80" x2="25" y2="35" stroke="#88c057" stroke-width="2"/>
                <path d="M25 10 Q15 20 20 30 L25 35" fill="#fff" stroke="#ffc0d3" stroke-width="1"/>
                <path d="M25 10 Q35 20 30 30 L25 35" fill="#fff" stroke="#ffc0d3" stroke-width="1"/>
                <path d="M25 15 Q20 25 25 32" fill="#fff" stroke="#ffc0d3" stroke-width="1"/>
                <line x1="25" y1="20" x2="30" y2="22" stroke="#ff9fc4" stroke-width="1"/>
                <line x1="25" y1="20" x2="20" y2="22" stroke="#ff9fc4" stroke-width="1"/>
            </svg>` }
        ];

        // Initialize
        function init() {
            updateVaseDisplay();
            updateFlowerDisplay();
            createHearts();
        }

        // Screen navigation
        function nextScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        // Vase functions
        function updateVaseDisplay() {
            document.getElementById('vaseDisplay').innerHTML = vases[state.currentVaseIndex];
        }

        function nextItem(type) {
            if (type === 'vase') {
                state.currentVaseIndex = (state.currentVaseIndex + 1) % vases.length;
                updateVaseDisplay();
            } else {
                state.currentFlowerIndex = (state.currentFlowerIndex + 1) % flowers.length;
                updateFlowerDisplay();
            }
        }

        function previousItem(type) {
            if (type === 'vase') {
                state.currentVaseIndex = (state.currentVaseIndex - 1 + vases.length) % vases.length;
                updateVaseDisplay();
            } else {
                state.currentFlowerIndex = (state.currentFlowerIndex - 1 + flowers.length) % flowers.length;
                updateFlowerDisplay();
            }
        }

        function selectVase() {
            state.selectedVase = state.currentVaseIndex;
            nextScreen('flowerScreen');
        }

        // Flower functions
        function updateFlowerDisplay() {
            document.getElementById('flowerDisplay').innerHTML = flowers[state.currentFlowerIndex].svg;
        }

        function addFlower() {
            if (state.selectedFlowers.length < 4) {
                state.selectedFlowers.push(state.currentFlowerIndex);
                updateFlowerCounter();
                
                if (state.selectedFlowers.length === 4) {
                    document.getElementById('continueBtn').style.display = 'block';
                }
            }
        }

        function updateFlowerCounter() {
            document.getElementById('flowerCounter').textContent = `${state.selectedFlowers.length}/4`;
        }

        // Message and final bouquet
        function createBouquet() {
            state.recipientName = document.getElementById('recipientName').value || 'Someone Special';
            state.message = document.getElementById('messageText').value || 'Happy Valentine\'s Day!';

            // Create final bouquet
            let bouquetHTML = '<div style="position: relative; width: 200px; height: 250px; margin: 0 auto;">';
            
            // Add flowers
            bouquetHTML += '<div style="position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%); width: 180px; height: 150px;">';
            state.selectedFlowers.forEach((flowerIndex, i) => {
                const positions = [
                    'left: 10%; bottom: 0;',
                    'left: 30%; bottom: 15px;',
                    'right: 30%; bottom: 15px;',
                    'right: 10%; bottom: 0;'
                ];
                bouquetHTML += `<div style="position: absolute; ${positions[i]}">${flowers[flowerIndex].svg}</div>`;
            });
            bouquetHTML += '</div>';

            // Add vase
            bouquetHTML += `<div style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);">${vases[state.selectedVase]}</div>`;
            bouquetHTML += '</div>';

            document.getElementById('finalBouquet').innerHTML = bouquetHTML;
            document.getElementById('displayName').textContent = `To: ${state.recipientName}`;
            document.getElementById('displayMessage').textContent = state.message;

            nextScreen('previewScreen');
        }

        function downloadBouquet() {
            const element = document.getElementById('previewScreen');
            html2canvas(element, {
                backgroundColor: '#ffb6c1',
                scale: 2
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'my-valentine-bouquet.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        function resetApp() {
            state.currentVaseIndex = 0;
            state.currentFlowerIndex = 0;
            state.selectedVase = null;
            state.selectedFlowers = [];
            state.recipientName = '';
            state.message = '';
            
            document.getElementById('recipientName').value = '';
            document.getElementById('messageText').value = '';
            document.getElementById('continueBtn').style.display = 'none';
            updateFlowerCounter();
            
            nextScreen('welcomeScreen');
        }

        // Decorative hearts
        function createHearts() {
            const heartsContainer = document.getElementById('hearts');
            for (let i = 0; i < 10; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.textContent = '‚ù§';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 4 + 's';
                heart.style.fontSize = (Math.random() * 10 + 15) + 'px';
                heartsContainer.appendChild(heart);
            }
        }

        // Start the app
        init();
    </script>
</body>
</html>
